'use strict';

const Promise = require('../../promise');

<<<<<<< HEAD
class ResourceLock {
  constructor(resource) {
    this.resource = resource;
    this.previous = Promise.resolve(resource);
  }

  unwrap() {
    return this.resource;
  }

  lock() {
    const lock = this.previous;
    let resolve;
    this.previous = new Promise(r => {
      resolve = r;
    });
    return lock.disposer(resolve);
  }
}
=======
function ResourceLock(resource) {
  this.resource = resource;
  this.previous = Promise.resolve(resource);
}

ResourceLock.prototype.unwrap = function() {
  return this.resource;
};

ResourceLock.prototype.lock = function() {
  const lock = this.previous;
  let resolve;

  this.previous = new Promise(r => {
    resolve = r;
  });

  return lock.disposer(resolve);
};
>>>>>>> 19d16fd3efdfc5b255b1d822e05b7c2aacd7873b

module.exports = ResourceLock;
